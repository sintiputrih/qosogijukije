<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>error: lvalue required as unary &amp;amp; operand -</title><meta name=robots content="index,follow,noarchive"><meta name=description content="While compiling (with Linux Server release 6.1)
strftime(AppTime, sizeof(AppTime),&#34;%Y/%m/%d %T&#34;, localtime(&((long)u32_Time)));  getting error &#34;error: lvalue required as unary '&' operand&#34;
but the same code compiled successfully with Red Hat Enterprise Linux AS release 3. Why so? How to correct this?
2 2 Answers  The address-operator & requires a variable to take the address from. The result of your cast (long)u32_Time is a temporary that does not necessarily reside in memory and therefore has no address that could be taken."><meta name=author content="Jenniffer Sheldon"><link rel="preload stylesheet" as=style href=https://assets.cdnweb.info/hugo/paper/css/app.css><link rel="preload stylesheet" as=style href=https://assets.cdnweb.info/hugo/paper/css/an-old-hope.min.css><script defer src=https://assets.cdnweb.info/hugo/paper/js/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=./theme.png><link rel=icon href=./favicon.ico><link rel=apple-touch-icon href=./apple-touch-icon.png><meta name=generator content="Hugo 0.98.0"><meta property="og:title" content="error: lvalue required as unary &amp;amp; operand"><meta property="og:description" content="While compiling (with Linux Server release 6.1) getting error &amp;quot;error: lvalue required as unary '&amp;amp;' operand&amp;quot; but the same code compiled successfully with Red Hat Enterprise Linux AS release 3. Why so? How to correct this?"><meta property="og:type" content="article"><meta property="og:url" content="/error-lvalue-required-as-unary-operand.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-06-06T00:00:00+00:00"><meta property="article:modified_time" content="2024-06-06T00:00:00+00:00"><meta itemprop=name content="error: lvalue required as unary &amp;amp; operand"><meta itemprop=description content="While compiling (with Linux Server release 6.1) getting error &amp;quot;error: lvalue required as unary '&amp;amp;' operand&amp;quot; but the same code compiled successfully with Red Hat Enterprise Linux AS release 3. Why so? How to correct this?"><meta itemprop=datePublished content="2024-06-06T00:00:00+00:00"><meta itemprop=dateModified content="2024-06-06T00:00:00+00:00"><meta itemprop=wordCount content="494"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="error: lvalue required as unary &amp;amp; operand"><meta name=twitter:description content="While compiling (with Linux Server release 6.1) getting error &amp;quot;error: lvalue required as unary '&amp;amp;' operand&amp;quot; but the same code compiled successfully with Red Hat Enterprise Linux AS release 3. Why so? How to correct this?"></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=./index.html>BlinkDash</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector(".btn-dark"),sysDark=window.matchMedia("(prefers-color-scheme: dark)"),darkVal=localStorage.getItem("dark"),setDark=e=>{bodyClx[e?"add":"remove"]("dark"),localStorage.setItem("dark",e?"yes":"no")};setDark(darkVal?darkVal==="yes":sysDark.matches),requestAnimationFrame(()=>bodyClx.remove("not-ready")),btnDark.addEventListener("click",()=>setDark(!bodyClx.contains("dark"))),sysDark.addEventListener("change",e=>setDark(e.matches))</script><nav class=menu><a href=./sitemap.xml>Sitemap</a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>Jun 6, 2024</time>
<span>Jenniffer Sheldon</span></p><h1>error: lvalue required as unary &amp;amp; operand</h1></header><section class=post-content><img src=https://cdn.statically.io/img/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>While compiling (with Linux Server release 6.1)</p><pre><code>strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;((long)u32_Time))); </code></pre><p>getting error "error: lvalue required as unary '&' operand"</p><p>but the same code compiled successfully with Red Hat Enterprise Linux AS release 3.</p><p>Why so? How to correct this?</p><span class=d-none itemprop=commentCount>2</span><h2 class=mb0 data-answercount=2>2 Answers</h2><p>The address-operator <code>&</code> requires a variable to take the address from. The result of your cast <code>(long)u32_Time</code> is a temporary that does not necessarily reside in memory and therefore has no address that could be taken. So if that piece of code ever compiled somewhere it was a nonstandard compiler extension.</p><p>The standard, §5.3.1,3 demands:</p><p>The result of the unary & operator is a pointer to its operand. The operand shall be an lvalue [...]</p><p><strong>How to fix this:</strong> <code>std::localtime</code> expects a pointer to a <code>std::time_t</code> so you best provide that. You did not provide any explanation or further code, so I can only guess that <code>u32_Time</code> is some 4 byte unsigned arithmetic type that is supposed to represent a time in some manner. How that is properly converted into a <code>std::time_t</code> depends on how your compiler implements the latter and how you got the value of the further. Simply applying a C-cast is not portable, and casting to <code>long</code> is even less portable.<br><strong>If, and only if</strong> the <code>std::time_t</code> on your current platform is also a unsigned 32 bit type using the same representation as your <code>u32_Time</code>, it might suffice to use</p><pre><code> localtime(reinterpret_cast&lt;std::time_t*&gt;(&amp;u32_Time)); </code></pre><p>More portable would be storing the value in the correct data type first:</p><pre><code> std::time_t time = u32_Time; localtime(&amp;time); </code></pre><p>That way you will get the necessary warnings and/or errors if <code>time_t</code> and the type of <code>u32_Time</code> are not compatible.</p><p>I would strongly advice against using C-casts, because once you have to port this piece of code to another platform you will have no means to find that nasty cast easily.</p><span class=d-none itemprop=commentCount>0</span><p>It's probably best to start with what the error means. An "lvalue" is something that appears on the left side of an equals sign. What it means is that your argument to the "address of" operator (&) must be something that you could assign to. In your case, this isn't syntactically correct:</p><pre><code>(long)u32_Time = 0; </code></pre><p>The reason for this restriction is that the & operator returns the address of something that is stored somewhere. (long)u32_Time isn't stored somewhere, but u32_Time is.</p><p>This might have worked ok on more tolerant compilers because it would allocate some space for the long representation of u32_Time and then give you a pointer to that, but I wouldn't count on that working (as can be seen in Linux Server release 6.1).</p><p>To fix this, you can just create a new variable and take it's address instead:</p><pre><code>long long_Time = (long)u32_Time; strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;long_Time)); </code></pre><p>However, that's still not perfect. localtime expects a time_t pointer, not a long pointer, and while they might be the same on your platform, you'd be better off with:</p><pre><code>time_t time_t_Time = (time_t)u32_Time; strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;time_t_Time)); </code></pre><span class=d-none itemprop=commentCount></span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJoaWtvaG19c4KOnqmrp6Jiubety66cZqqVpsKqvsSdZJqrXaq7or7YZqapnaKWu6U%3D</p></section><nav class=post-nav><a class=prev href=./deadliest-catch-whatever-happened-freddy.html><span>←</span><span>Deadliest Catch: Whatever Happened To Freddy?</span></a>
<a class=next href=./inside-gwyneth-paltrow-and-chris-martins-friendship-after-divorce.html><span>Inside Gwyneth Paltrow and Chris Martin's Friendship After Divorce</span><span>→</span></a></nav></article></main><footer class=footer><p>&copy; 2024 <a href=./></a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p></footer><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/banner.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>